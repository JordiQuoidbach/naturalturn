% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/collapse.R
\name{collapse_turns_preserving_overlaps}
\alias{collapse_turns_preserving_overlaps}
\title{Collapse Turns Preserving Overlaps}
\usage{
collapse_turns_preserving_overlaps(
  transcript_df,
  max_pause = 1.5,
  speaker_col = "speaker",
  text_col = "text",
  start_col = "time.s",
  stop_col = "time.e"
)
}
\arguments{
\item{transcript_df}{Data frame with transcript data. Must contain columns
for speaker, text, start time, and stop time.}

\item{max_pause}{Maximum pause (in seconds) between consecutive segments from
the same speaker to be merged into one turn. Default: 1.5 seconds.}

\item{speaker_col}{Name of column containing speaker identifier. Default: "speaker".}

\item{text_col}{Name of column containing utterance text. Default: "text".}

\item{start_col}{Name of column containing start time in seconds. Default: "time.s".}

\item{stop_col}{Name of column containing stop time in seconds. Default: "time.e".}
}
\value{
Data frame with collapsed turns, including columns:
  \itemize{
    \item \code{speaker}: Speaker identifier
    \item \code{start}: Start time of turn
    \item \code{stop}: Stop time of turn
    \item \code{utterance}: Concatenated text from merged segments
    \item \code{n_utterances_merged}: Number of original segments merged
    \item \code{duration}: Turn duration (stop - start)
    \item \code{pause}: Pause before this turn (gap from previous turn)
    \item \code{n_words}: Word count
    \item \code{n_questions}: Number of question marks
    \item \code{ends_with_question}: Logical, whether turn ends with "?"
  }
}
\description{
Collapses consecutive speech segments from the same speaker when separated
by pauses shorter than \code{max_pause}, while preserving overlaps between
different speakers. This is the first step in the NaturalTurn algorithm.
}
\details{
This function processes each speaker separately, identifying groups
  of consecutive segments with pauses < \code{max_pause} and merging them.
  Overlaps between different speakers are preserved (not collapsed).

  This is part of the NaturalTurn algorithm implementation. See
  \code{\link{natural_turn_transcript}} for the complete algorithm.
}
\examples{
\dontrun{
# Example transcript data
transcript <- data.frame(
  speaker = c("A", "A", "B", "A"),
  text = c("Hello", "there", "Hi", "How are you"),
  time.s = c(0.0, 1.2, 1.5, 3.0),
  time.e = c(1.0, 2.0, 2.5, 4.0)
)

# Collapse pauses < 1.5 seconds
collapsed <- collapse_turns_preserving_overlaps(transcript, max_pause = 1.5)
}

}
\keyword{internal}
